<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>D3 Bar Chart</title>
  <link rel="stylesheet" href="">
</head>
<style type="text/css">
  .chart div {
    font: 10px sans-serif;
    background-color: steelblue;
    text-align: right;
    padding: 3px;
    margin: 1px;
    color: white;
  }

  .chart rect, .vertical rect {
    fill: steelblue;
  }

  .chart text, .vertical text {
    fill: white;
    font: 10px sans-serif;
  }

  /*for horizontal bar charts*/
  .chart text {
    text-anchor: end;
  }

  /*for vertical bar charts*/
  .vertical rect {
    text-anchor: middle;
  }

  /*adding axes (vertical bar charts)*/
  .bar {
    fill: steelblue;
  }

  .bar:hover {
    fill: brown;
  }

  .axis text {
    font: 10px sans-serif;
  }

  .axis path, .axis line {
    fill: none;
    stroke: #000;
    shape-rendering: crispEdges;
  }

  .x.axis path {
    display: none;
  }

</style>
<script src="http://d3js.org/d3.v3.min.js"></script>

<body>
  <h1>Part 1: Basics</h1>
  <div class="chart">
    <!-- Coding a Chart Manually -->
    <!-- <div style="width: 40px;">4</div>
    <div style="width: 80px;">8</div>
    <div style="width: 150px;">15</div>
    <div style="width: 160px;">16</div>
    <div style="width: 230px;">23</div>
    <div style="width: 420px;">42</div> -->

    <!-- Coding a Chart Automatically -->
    <script>
      var data = [4, 8, 15, 16, 23, 42];

      var x = d3.scale.linear()
            .domain([0, d3.max(data)])
            .range([0, 420]);

      d3.select(".chart")
        .selectAll("div")
          .data(data)
        .enter().append("div")      
          .style("width", function(d) { return x(d) + "px"; })
          .text(function(d) { return d; });
    </script>
  </div>

  <h1>Part 2: SVG</h1>
  <!-- Coding a Chart Manually -->
  <!-- <svg class="chart" width="420" height="120">
    <g transform="translate(0,0)">
      <rect width="40" height="19"></rect>
      <text x="37" y="9.5" dy=".35em">4</text>
    </g>
    <g transform="translate(0,20)">
      <rect width="80" height="19"></rect>
      <text x="77" y="9.5" dy=".35em">8</text>
    </g>
    <g transform="translate(0,40)">
      <rect width="150" height="19"></rect>
      <text x="147" y="9.5" dy=".35em">15</text>
    </g>
    <g transform="translate(0,60)">
      <rect width="160" height="19"></rect>
      <text x="157" y="9.5" dy=".35em">16</text>
    </g>
    <g transform="translate(0,80)">
      <rect width="230" height="19"></rect>
      <text x="227" y="9.5" dy=".35em">23</text>
    </g>
    <g transform="translate(0,100)">
      <rect width="420" height="19"></rect>
      <text x="417" y="9.5" dy=".35em">42</text>
    </g>
  </svg> -->

  <svg class="chart"></svg>
  <script>
    // Coding a Chart Automatically
    // var data = [4, 8, 15, 16, 23, 42];

    // var width = 420,
    //     barHeight = 20;

    // var x = d3.scale.linear()
    //           .domain([0, d3.max(data)])
    //           .range([0, width]);

    // var chart = d3.select("svg.chart")
    //               .attr("width", width)
    //               .attr("height", barHeight * data.length);

    // var bar = chart.selectAll("g")
    //                 .data(data)
    //                 .enter().append("g")
    //                 .attr("transform", function(d, i) {
    //                   return "translate(0," + i * barHeight + ")";
    //                 });

    // bar.append("rect")
    //     .attr("width", x)
    //     .attr("height", barHeight - 1);

    // bar.append("text")
    //     .attr("x", function(d) {
    //       return x(d) - 3;
    //     })
    //     .attr("y", barHeight / 2)
    //     .attr("dy", ".35em")
    //     .text(function(d) {
    //       return d;
    //     });

    // Loading Data
    var width = 420,
        barHeight = 20;

    var x = d3.scale.linear()
        .range([0, width]);

    var chart = d3.select("svg.chart")
          .attr("width", width + 46);

    d3.csv("data.csv", type, function(error, data) {
      x.domain([0, d3.max(data, function(d) {
        return d.value;
      })]);

      chart.attr("height", barHeight * data.length);

      var bar = chart.selectAll("g")
            .data(data)
          .enter().append("g")
            .attr("transform", function(d, i) {
              return "translate(46," + i * barHeight + ")";
            });

      bar.append("rect")
          .attr("width", function(d) {
            return x(d.value);
          })
          .attr("height", barHeight - 1);

      bar.append("text")
          .attr("x", function(d) {
            return x(0);
          })
          .attr("y", barHeight / 2)
          .attr("dy", ".35em")
          .style('fill', 'steelblue')
          .text(function(d) {
            return d.name;
          });

      bar.append("text")
          .attr("x", function(d) {
            return x(d.value) - 3;
          })
          .attr("y", barHeight / 2)
          .attr("dy", ".35em")
          .text(function(d) {
            return d.value;
          });
    });

    function type(d) {
      d.value = +d.value;
      return d;
    }

  </script>

  <h1>Part 3: Columns and Axes</h1>
  <svg class="vertical"></svg>
  <script>
    // Rotating Into Columns
    // var width = 960;
    //     height = 500;

    // var y = d3.scale.linear()
    //       .range([height, 0]);

    // var vertical = d3.select(".vertical")
    //               .attr("width", width)
    //               .attr("height", height + 11);
    
    // d3.csv("data.csv", type, function(error, data) {
    //   y.domain([0, d3.max(data, function(d) {
    //     return d.value;
    //   })]);

    //   var barWidth = width / data.length;

    //   var bar = vertical.selectAll("g")
    //                   .data(data)
    //                   .enter().append("g")
    //                   .attr("transform", function(d, i) {
    //                     return "translate(" + i * barWidth + ",0)";
    //                   });

    //   bar.append("rect")
    //       .attr("y", function(d) { return y(d.value); })
    //       .attr("height", function(d) { return height - y(d.value); })
    //       .attr("width", barWidth - 1);

    //   bar.append("text")
    //       .attr("x", barWidth / 2)
    //       .attr("y", function(d) { return y(d.value) + 3; })
    //       .attr("dy", ".75em")
    //       .text(function(d) { return d.value; });

    //   bar.append("text")
    //       .attr("x", (barWidth/2) - 15)
    //       .attr("y", function(d) { return height + 2; })
    //       .attr("dy", ".75em")
    //       .style('fill', 'steelblue')
    //       .text(function(d) { return d.name; });
    // });

    // function type(d) {
    //   d.value = +d.value; // coerce to number
    //   return d;
    // }

    // Encoding Ordinal Data
    // var width = 960
    //     height = 500;

    // var ordinalX = d3.scale.ordinal()
    //           .rangeRoundBands([0, width], .1);

    // var y = d3.scale.linear()
    //           .range([height, 0]);

    // var vertical = d3.select(".vertical")
    //                   .attr("width", width)
    //                   .attr("height", height);

    // d3.csv("data.csv", type, function(error, data) {
    //   ordinalX.domain(data.map(function(d) { return d.name; }));
    //   y.domain([0, d3.max(data, function(d) { return d.value; })]);

    //   var bar = vertical.selectAll("g")
    //                 .data(data)
    //                 .enter().append("g")
    //                 .attr("transform", function(d) { 
    //                   return "translate(" + ordinalX(d.name) + ",0)"; 
    //                 });

    //   bar.append("rect")
    //       .attr("y", function(d) { return y(d.value); })
    //       .attr("height", function(d) { return height - y(d.value); })
    //       .attr("width", ordinalX.rangeBand());
    // });

    // Ordinal Data + Margins + Axes
    var margin = {top: 20, right: 30, bottom: 30, left: 40},
        width = 960 - margin.left - margin.right,
        height = 500 - margin.top - margin.bottom;

    var ordinalX = d3.scale.ordinal()
                    .rangeRoundBands([0, width], .1);

    var y = d3.scale.linear()
              .range([height, 0]);

    var xAxis = d3.svg.axis()
                  .scale(ordinalX)
                  .orient("bottom");

    var yAxis = d3.svg.axis()
                  .scale(y)
                  .orient("left");

    var vertical = d3.select(".vertical")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
    .append("g")
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

    d3.csv("alphabet.csv", type, function(error, data) {
      ordinalX.domain(data.map(function(d) { return d.letter; }));
      y.domain([0, d3.max(data, function(d) { return d.frequency; })]);

      vertical.append("g")
          .attr("class", "x axis")
          .attr("transform", "translate(0," + height + ")")
          .call(xAxis);

      vertical.selectAll(".bar")
          .data(data)
        .enter().append("rect")
          .attr("class", "bar")
          .attr("x", function(d) { return ordinalX(d.letter); })
          .attr("y", function(d) { return y(d.frequency); })
          .attr("height", function(d) { return height - y(d.frequency); })
          .attr("width", ordinalX.rangeBand());

      vertical.append("g")
          .attr("class", "y axis")
          .call(yAxis)
        .append("text")
          .attr("transform", "rotate(-90)")
          .attr("y", 6)
          .attr("dy", ".71em")
          .style("text-anchor", "end")
          .style("fill", "steelblue")
          .text("Frequency");
    });

    function type(d) {
      d.value = +d.value; // coerce to number
      return d;
    }
  </script>

</body>

</html>